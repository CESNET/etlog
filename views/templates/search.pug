//- navbar selected item
-var selected = 'Obecné Vyhledávání';

div(ng-controller="search_controller")
  div
    md-content(layout-padding='')
      form.form-horizontal#main_form(ng-submit="submit()" novalidate)
        .form-group
          label.col-sm-2.control-label(for = 'username') Uživatelské jméno:
          .col-xs-3
            input.form-control(type = 'email', placeholder = 'uživatel@příklad.cz', ng-model='form_data.pn')
        
        .form-group
          label.col-sm-2.control-label(for = 'mac_address') Mac adresa:
          .col-xs-2
            input.form-control(type = 'text', placeholder = '12:34:56:78:ab:cd', ng-model='form_data.csi')

        .form-group
          label.col-sm-2.control-label(for = 'result') Výsledek autentizace:
          .col-xs-2
            select.form-control(ng-model='form_data.result')
              each key, val in {"nezadáno" : "", "OK" : "OK", "FAIL" : "FAIL", "TIMEOUT" : "TIMEOUT"}
                option(value = key) #{val}

        .form-group
          label.col-sm-2.control-label(for = 'min_date') Počáteční datum:
          .col-xs-2
            div(layout-gt-xs='row')
              input.flatpickr#min_date(type='text', ng-model='form_data.min_date')

        .form-group
          label.col-sm-2.control-label(for = 'max_date') Koncové datum:
          .col-xs-2
            div(layout-gt-xs='row')
              input.flatpickr#max_date(type='text', ng-model='form_data.max_date')
 
        .form-group
          .col-sm-offset-2.col-sm-10
            button.btn.btn-default(type="submit") Hledej

  div(ng-show='submitted')
    .form-group
      .col-xs-2
      label záznamů na stránku:
        select.form-control(ng-model='paging.items_by_page', ng-options='size for size in page_sizes')

    table.table.table-bordered.table-responsive
      thead
        tr
          th datum a čas
          th uživatelské jméno
          th MAC adresa
          th realm
          th navštívená insituce
          th výsledek autentizace
      tbody(ng-show='!paging.loading')
        tr(dir-paginate='row in data | itemsPerPage: paging.items_by_page ', total-items='paging.total_items')
          td {{row.timestamp}}
          td {{row.username}}
          td {{row.mac_address}}
          td {{row.realm}}
          td {{row.visinst}}
          td.bg-success(ng-if='row.result == "OK"') {{row.result}}
          td.bg-warning(ng-if='row.result == "TIMEOUT"') {{row.result}}
          td.bg-danger(ng-if='row.result == "FAIL"') {{row.result}}
      tbody(ng-show='paging.loading')
        tr
          td.text-center(colspan='6')
            .loading-indicator

    .text-center
      dir-pagination-controls(boundary-links='true', on-page-change='page_changed(newPageNumber)', template-url='dirPagination.tpl.html')


