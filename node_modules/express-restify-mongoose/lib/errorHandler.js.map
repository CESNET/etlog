{"version":3,"sources":["../src/errorHandler.js"],"names":[],"mappings":";;AAAA,IAAM,OAAO,QAAQ,MAAR,CAAb;;AAEA,OAAO,OAAP,GAAiB,UAAU,OAAV,EAAmB;AAClC,SAAO,UAAU,GAAV,EAAe,GAAf,EAAoB,IAApB,EAA0B;AAC/B,WAAO,UAAU,GAAV,EAAe;AACpB,UAAI,IAAI,OAAJ,KAAgB,KAAK,YAAL,CAAkB,GAAlB,CAAhB,IAA2C,IAAI,MAAJ,CAAW,EAAX,IAAiB,IAAI,IAAJ,KAAa,QAAQ,UAAtC,IAAoD,IAAI,IAAJ,KAAa,WAAhH,EAA8H;AAC5H,YAAI,GAAJ,CAAQ,UAAR,GAAqB,GAArB;AACD,OAFD,MAEO;AACL,YAAI,GAAJ,CAAQ,UAAR,GAAqB,IAAI,GAAJ,CAAQ,UAAR,IAAsB,IAAI,GAAJ,CAAQ,UAAR,IAAsB,GAA5C,GAAkD,IAAI,GAAJ,CAAQ,UAA1D,GAAuE,GAA5F;AACD;;AAED,cAAQ,OAAR,CAAgB,GAAhB,EAAqB,GAArB,EAA0B,GAA1B,EAA+B,IAA/B;AACD,KARD;AASD,GAVD;AAWD,CAZD","file":"errorHandler.js","sourcesContent":["const http = require('http')\r\n\r\nmodule.exports = function (options) {\r\n  return function (req, res, next) {\r\n    return function (err) {\r\n      if (err.message === http.STATUS_CODES[404] || (req.params.id && err.path === options.idProperty && err.name === 'CastError')) {\r\n        req.erm.statusCode = 404\r\n      } else {\r\n        req.erm.statusCode = req.erm.statusCode && req.erm.statusCode >= 400 ? req.erm.statusCode : 400\r\n      }\r\n\r\n      options.onError(err, req, res, next)\r\n    }\r\n  }\r\n}\r\n"]}