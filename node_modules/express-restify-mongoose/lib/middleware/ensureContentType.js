'use strict';

module.exports = function (options) {
  var errorHandler = require('../errorHandler')(options);

  return function ensureContentType(req, res, next) {
    var ct = req.headers['content-type'];

    if (!ct) {
      return errorHandler(req, res, next)(new Error('missing_content_type'));
    }

    if (ct.indexOf('application/json') === -1) {
      return errorHandler(req, res, next)(new Error('invalid_content_type'));
    }

    next();
  };
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9taWRkbGV3YXJlL2Vuc3VyZUNvbnRlbnRUeXBlLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsT0FBTyxPQUFQLEdBQWlCLFVBQVUsT0FBVixFQUFtQjtBQUNsQyxNQUFNLGVBQWUsUUFBUSxpQkFBUixFQUEyQixPQUEzQixDQUFyQjs7QUFFQSxTQUFPLFNBQVMsaUJBQVQsQ0FBNEIsR0FBNUIsRUFBaUMsR0FBakMsRUFBc0MsSUFBdEMsRUFBNEM7QUFDakQsUUFBTSxLQUFLLElBQUksT0FBSixDQUFZLGNBQVosQ0FBWDs7QUFFQSxRQUFJLENBQUMsRUFBTCxFQUFTO0FBQ1AsYUFBTyxhQUFhLEdBQWIsRUFBa0IsR0FBbEIsRUFBdUIsSUFBdkIsRUFBNkIsSUFBSSxLQUFKLENBQVUsc0JBQVYsQ0FBN0IsQ0FBUDtBQUNEOztBQUVELFFBQUksR0FBRyxPQUFILENBQVcsa0JBQVgsTUFBbUMsQ0FBQyxDQUF4QyxFQUEyQztBQUN6QyxhQUFPLGFBQWEsR0FBYixFQUFrQixHQUFsQixFQUF1QixJQUF2QixFQUE2QixJQUFJLEtBQUosQ0FBVSxzQkFBVixDQUE3QixDQUFQO0FBQ0Q7O0FBRUQ7QUFDRCxHQVpEO0FBYUQsQ0FoQkQiLCJmaWxlIjoiZW5zdXJlQ29udGVudFR5cGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XHJcbiAgY29uc3QgZXJyb3JIYW5kbGVyID0gcmVxdWlyZSgnLi4vZXJyb3JIYW5kbGVyJykob3B0aW9ucylcclxuXHJcbiAgcmV0dXJuIGZ1bmN0aW9uIGVuc3VyZUNvbnRlbnRUeXBlIChyZXEsIHJlcywgbmV4dCkge1xyXG4gICAgY29uc3QgY3QgPSByZXEuaGVhZGVyc1snY29udGVudC10eXBlJ11cclxuXHJcbiAgICBpZiAoIWN0KSB7XHJcbiAgICAgIHJldHVybiBlcnJvckhhbmRsZXIocmVxLCByZXMsIG5leHQpKG5ldyBFcnJvcignbWlzc2luZ19jb250ZW50X3R5cGUnKSlcclxuICAgIH1cclxuXHJcbiAgICBpZiAoY3QuaW5kZXhPZignYXBwbGljYXRpb24vanNvbicpID09PSAtMSkge1xyXG4gICAgICByZXR1cm4gZXJyb3JIYW5kbGVyKHJlcSwgcmVzLCBuZXh0KShuZXcgRXJyb3IoJ2ludmFsaWRfY29udGVudF90eXBlJykpXHJcbiAgICB9XHJcblxyXG4gICAgbmV4dCgpXHJcbiAgfVxyXG59XHJcbiJdfQ==
//# sourceMappingURL=ensureContentType.js.map